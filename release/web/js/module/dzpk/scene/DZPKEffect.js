var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(i,e){function a(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();define(["require","exports"],function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(t){function i(){var i=t.call(this)||this;return i._obj_circle={},i._img_circle=null,i._spr_mask=null,i._img_blink=null,i._spr_rotation=null,i}return __extends(i,t),i.prototype.removeOver=function(){if(this.stopCircleEffect(),this._arr_succ&&this._arr_succ.length>0)for(;this._arr_succ.length>0;)this.removeChild(this._arr_succ.pop());if(this._arr_font&&this._arr_font.length>0)for(;this._arr_font.length>0;)this.removeChild(this._arr_font.pop());for(;this.numChildren>0;){var t=this.getChildAt(this.numChildren-1);Laya.Tween.clearAll(t),this.removeChild(t)}},i.prototype.succType=function(t,i){this._arr_succ||(this._arr_succ=[]);var e=new ui.game_dzpk.DZPKSuccUI;e.img_succ_type.skin="dzpk/zh-cn/font/gameOverFont/victory_cardType"+t+".png",e.x=i.x-126,e.y=i.y-78,this.addChild(e),this._arr_succ.push(e)},i.prototype.numberFloat=function(t,i,e){this._arr_font||(this._arr_font=[]);var a=new Laya.FontClip;i?(a.skin="bitmapFont/gameOverVictoryFnt.png",a.sheet="49807 6+325. 1  "):(a.skin="bitmapFont/gameOverCutFnt.png",a.sheet="40. 861 79- 235"),a.value=t.toString(),a.x=e.x,a.y=e.y,this.addChild(a),this._arr_font.push(a),Laya.Tween.to(a,{y:e.y-100},200)},i.prototype.choumaEffect=function(t,i){var e,a=0;for(a=1;a<=6;a++)(e=new Laya.Image("dzpk/gameScene/score"+a+".png")).x=t.x,e.y=t.y,this.addChild(e),Laya.Tween.to(e,{x:i.x,y:i.y},200,null,laya.utils.Handler.create(this,this.choumaComplete,[e]),20*a)},i.prototype.choumaComplete=function(t){this.removeChild(t)},i.prototype.choumaHeguan=function(t,i){var e=0,a=t.length;for(e=0;e<a;e++)this.choumaEffect(t[e],i)},i.prototype.qipaiEffect=function(t,i){var e=new ui.game_dzpk.DZPKCardsUI;e.getChildByName("box_lcard").getChildByName("img_tip").visible=!1,e.getChildByName("box_rcard").getChildByName("img_tip").visible=!1,e.x=t.x,e.y=t.y,e.scaleX=e.scaleY=.5,this.addChild(e),Laya.Tween.to(e,{x:i.x,y:i.y},400,null,laya.utils.Handler.create(this,this.qipaiComplete,[e]))},i.prototype.qipaiComplete=function(t){this.removeChild(t)},i.prototype.comFanpai=function(t,i,e,a,r){var o=new Laya.Image("dzpk/cards/card_0.png");o.x=i.x,o.y=i.y,o.scale(.3,.3),this.addChild(o),Laya.Tween.to(o,{x:t.x,y:t.y},200,null,laya.utils.Handler.create(this,this.moveComplete,[o,t,e,a,r]))},i.prototype.moveComplete=function(t,i,e,a,r){this.removeChild(t),this.fanpai(i,e,a,r)},i.prototype.heguanfapaiEffect=function(t,i,e,a,r,o){var s=new Laya.Image("dzpk/cards/card_0.png");s.x=i.x,s.y=i.y,s.scale(.3,.3),this.addChild(s);var n=0,c=t.length;for(n=0;n<2*c;n++)Laya.Tween.to(s,{x:t[n%c].x,y:t[n%c].y},200,null,laya.utils.Handler.create(this,this.heguanComplete,[s,i,e,n,2*c,a,r,o]),250*n)},i.prototype.heguanComplete=function(t,i,e,a,r,o,s,n){t.x=i.x,t.y=i.y,a==r-1&&this.removeChild(t),e!=a&&2*e!=a||(e==a?o.apply(n,s.concat(!1)):o.apply(n,s.concat(!0)))},i.prototype.fanpai=function(t,i,e,a){var r=new Laya.Animation;r.x=t.x,r.y=t.y,r.loadAtlas("res/atlas/dzpk/effect/fanpai.atlas",Laya.Handler.create(this,this.onLoaded,[r,i,e,a]))},i.prototype.onLoaded=function(t,i,e,a){this.addChild(t),t.on(Laya.Event.COMPLETE,this,this.fanComplete,[t,i,e,a]),t.play()},i.prototype.fanComplete=function(t,i,e,a){this.removeChild(t),i.apply(a,e)},i.prototype.stopCircleEffect=function(){Laya.Tween.clearAll(this._obj_circle),this._img_circle&&(this._spr_mask.graphics.clear(),this._img_circle.mask=null,this.removeChild(this._img_circle),this.removeChild(this._spr_rotation))},i.prototype.circleEffect=function(t,i,e,a,r,o){this._img_circle||(this._img_circle=new Laya.Image("dzpk/gameScene/progressTimerBg.png")),this._img_blink||(this._img_blink=new Laya.Image("dzpk/gameScene/progressTimerBlink.png")),this._spr_mask||(this._spr_mask=new Laya.Sprite),this._spr_rotation||(this._spr_rotation=new Laya.Sprite),this._img_circle.x=e,this._img_circle.y=a,this._img_circle.mask=this._spr_mask,this.addChild(this._img_circle),this._spr_rotation.x=e+i,this._spr_rotation.y=a+i,this.addChild(this._spr_rotation),this._img_blink.x=.5*-this._img_blink.width*.5,this._img_blink.y=-i-.5*this._img_blink.width*.5,this._img_blink.scale(.5,.5),this._spr_rotation.addChild(this._img_blink),this._spr_mask.graphics.clear(),this._obj_circle={x:i,y:i,radius:i,r:360*(15-t)/15},Laya.Tween.to(this._obj_circle,{r:360,update:new Laya.Handler(this,this.updateR)},15e3,null,laya.utils.Handler.create(this,this.circleComplete,[r,o]),0)},i.prototype.circleComplete=function(t,i){this._img_circle.mask=null,this.removeChild(this._img_circle),this.removeChild(this._spr_rotation),t&&t.call(i)},i.prototype.updateR=function(){this._spr_mask.graphics.clear(),this._spr_mask.graphics.drawPie(this._obj_circle.x,this._obj_circle.y,this._obj_circle.radius,-90,-90+this._obj_circle.r,"#ff0000"),this._spr_rotation.rotation=this._obj_circle.r},i}(laya.ui.Component);i.DZPKEffect=e});