var SocketManager=function(){function n(){this._dic_ws={}}return n.prototype.connect=function(e,t){if(void 0===t&&(t=null),n.arr_address.length>0)for(var o=0;o<n.arr_address.length;o++)n.arr_address[o].hasOwnProperty("main")&&(n.arr_address[o].main==e&&n.arr_address[o].sub==t||n.arr_address.push({main:e,sub:t}));else n.arr_address.push({main:e,sub:t});var r=this.getWSBykey(e,t),s=r[0],i=r[1];s?s=this._dic_ws[i]:((s=new laya.net.Socket).endian=Laya.Byte.LITTLE_ENDIAN,this._dic_ws[i]=s,s.on(laya.events.Event.MESSAGE,s,this.onMessage),s.on(laya.events.Event.OPEN,s,this.onOpen),s.on(laya.events.Event.CLOSE,s,this.onClose),s.on(laya.events.Event.ERROR,s,this.onError)),t?s.connect(e,Number(t)):s.connectByUrl(e)},n.prototype.destroy=function(n,e){void 0===e&&(e=null);var t=this.getWSBykey(n,e),o=t[0],r=t[1];o?(o.offAll(),o.cleanSocket(),o=null,this._dic_ws[r]=null,delete this._dic_ws[r]):CFun.throw("正在清除不存在的链接")},n.prototype.close=function(n,e){void 0===e&&(e=null);var t=this.getWSBykey(n,e)[0];t?t.close():CFun.throw("正在关闭不存在的链接")},n.prototype.send=function(n,e,t){void 0===t&&(t=null);var o=this.getWSBykey(e,t),r=o[0],s=o[1];r||CFun.throw("正在向不存在的"+s+"链接发送消息");var i=AnalyzeData.ins.analyzeSend(n,s);r.send(i[1]),laya.utils.Pool.recover("tmpByte",i[0])},n.prototype.onMessage=function(e){void 0===e&&(e=null);var t=n.ins.getKeyByWS(this);AnalyzeData.ins.analyzeRecv(e,t)},n.prototype.getKeyByWS=function(n){for(var e in this._dic_ws)if(this._dic_ws[e]==n)return e;return""},n.prototype.getWSBykey=function(n,e){void 0===e&&(e=null);var t="";return t=e?n:n+","+e,[this._dic_ws[t],t]},Object.defineProperty(n,"ins",{get:function(){return this._instance||(this._instance=new n),this._instance},enumerable:!0,configurable:!0}),n.prototype.onOpen=function(n){void 0===n&&(n=null)},n.prototype.onClose=function(n){void 0===n&&(n=null),CFun.log("连接关闭："+n)},n.prototype.onError=function(n){void 0===n&&(n=null),CFun.log("连接错误："+n)},n.arr_address=[],n}();